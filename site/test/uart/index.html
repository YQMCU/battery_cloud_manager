<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>通讯demo - 云电池开发备忘录</title>
           
        <meta name="description" content="云平台开发样品开发文档">
        <meta name="author" content="缘起">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <link rel="stylesheet" href="../../css/reset.css" type="text/css">
    <link rel="stylesheet" href="../../css/docskimmer.css" type="text/css">

    
  

    <link rel="shortcut icon" href="../../img/favicon.ico">
	  <link rel="apple-touch-icon" href="../../img/apple-touch-icon.png">
	  <link rel="apple-touch-icon" sizes="72x72" href="../../img/apple-touch-icon-72x72.png">
	  <link rel="apple-touch-icon" sizes="114x114" href="../../img/apple-touch-icon-114x114.png">
  </head>

  <body>
    <a class="skiptocontent" href="#maincontent" title="Skip to content (when browsing via audio)" accesskey="2" tabindex="1">skip to main content</a>
    <div id="top" class="wrapper">
    <header class="header-main" role="banner">
  
     <h2 class="header-main__heading"><a class="header-main__link" href="../..">云电池开发备忘录</a></h2>
  
</header>

    
        
  <form class="form form--search" id="content_search" action="../../search.html" method="get" role="search">
    <div class="form-group">
      <label class="hidden" for="mkdocs-search-query">Search for:</label>
      <input type="search" aria-label="Search" class="form__input" name="q" id="mkdocs-search-query" placeholder="Search the docs for..." tabindex="3"> <button type="submit" class="form__btn-submit">Search</button>
    </div>
  </form>

    
    
    

<nav class="nav-main" aria-label="Main menu" role="navigation">
  <ul class="nav-main__level" role="menubar">
    
      
          <li class="nav-main__item" role="menuitem">
           	<a class="nav-main__link" href="../..">Home</a>
          </li>
      
    
      
        <li class="nav-main__item" role="menuitem">
          
                               
              <a class="nav-main__link" href="../../pre/frame/"> 研发准备</a>
            
          
            
          
        </li>
      
    
      
        <li class="nav-main__item" role="menuitem">
          
                               
              <a class="nav-main__link" href="../../soft/device/"> 软件设计</a>
            
          
            
          
            
          
        </li>
      
    
      
        <li class="nav-main__item" role="menuitem">
          
                               
              <a class="nav-main__link" href="../../hard/circuit/"> 硬件设计</a>
            
          
            
          
            
          
        </li>
      
    
      
        <li class="nav-main__item nav-main__item--current" role="menuitem">
          
                               
              <a class="nav-main__link" href="../perform/"> 样机测试</a>
            
          
            
          
            
          
        </li>
      
    
      
          <li class="nav-main__item" role="menuitem">
           	<a class="nav-main__link" href="../../reference/">参考资料</a>
          </li>
      
    
      
        <li class="nav-main__item" role="menuitem">
          
                               
              <a class="nav-main__link" href="../../other/openluat/"> 其他</a>
            
          
            
          
        </li>
      
    

    
    
      <li class="nav-main__item nav-main__item--repo" role="menuitem">
     	  <a class="nav-main__link nav-main__link--repo" href="https://github.com/YQMCU/ld_cloud_note">GitHub</a>
      </li>
    
  </ul>
</nav>

    
    <!-- BEGIN subnav -->
    
    
      
    
      
        
        
          
        
          
        
      
    
      
        
        
          
        
          
        
          
        
      
    
      
        
        
          
        
          
        
          
        
      
    
      
        
        
          
        
          
            <aside class="section-toc" role="complementary" aria-label="Table of Contents for this section">
            <ul>
  
    
      
    
      
        
          
        
          
        
      
    
      
        
          
        
          
        
          
        
      
    
      
        
          
        
          
        
          
        
      
    
      
        
          
            <li class="section-toc__item"><a href="../perform/" class="section-toc__link">性能总结</a></li>
          
        
          
            <li class="section-toc__item section-toc__item--active"><a href="./" class="section-toc__link section-toc__link--active"><span class="visually-hidden">Current: </span> 通讯demo</a></li>
          
        
          
            <li class="section-toc__item"><a href="../test/" class="section-toc__link">测试视频</a></li>
          
        
      
    
      
    
      
        
          
        
          
        
      
    
  
</ul>

            </aside>
          
        
          
        
      
    
      
    
      
        
        
          
        
          
        
      
    

    <button id="menu-hamburger" aria-label="Open menu table of contents for this page" type="button" title="Menu">&#9776; open</button>
    <!-- END subnav -->
    
   
     <main id="maincontent" role="main">
      <h1 id="demo">通讯demo</h1>
<h2 id="_1">安科瑞通讯协议详细示例</h2>
<pre><code class="markdown">设置
保护参数
01
10
1770
0020
40
0E 6000
420D 6001
4800 6002
0309 6003
C40A 6004
F000 6005
0302 6006
4802 6007
3A00 6008
0301 6009
9001 6010
A400 6011
030B 6012
B800 6013
0000 6014
0313 6015
8800 6016
0000 6017
03FF 6018
CE00 6019
0000 6020
03FF 6021
38FF 6022
6A00 6023
0302 6024
2601 6025
F400 6026
0302 6027
5801 6028
F400 6029
0300 6030
0000 6031
00
A1B1 CRC校验码
| slave adress | 01 | |
|:-:|:-:|:-:|
| func code | 10 | |
|reg high byte| 17|6000|
|reg low byte| 70||
|寄存器数量高位|00||
|寄存器数量低位|20|32|
单体过压
单体欠压
总压过压
总压欠压
充电过流
放电过流
低温充电
低温放电
高温充电
高温放电
报警参数设置
01
10
1790
001E
3C
0E74
0E42
00
0309
6009
9200
0302
4C02
4800
0301
8601
9000
030B
B80F
A000
0313
880F
A000
0300
0000
1400
03FF
4CFF
5600
0302
1C02
0800
0302
4402
2600
03
D24F
报警参数
01
10
1790
001E
3C
0000 0
03E8 1
0002 2
0BB8 3
0FA0 4
0005 5
003C
0046
0008 8
005A
0064
000B 11
0078
0082
000E
0096
00C8
0064
07D0
0001
0000
0000
FF56
0003
021C
0208
0034
001E
0000 0
0005 5
3364 CRC
保护参数
01
10
1770
0020 32
40
0E42 单体过压 精度0.001 单位V 设置3.65
0D48 单体过压恢复 精度0.001 单位V 设置3.4
0003 单体过压延时 精度1 单位s 设置3
09C4 单体欠压 精度0.001 单位V 设置2.5
0AF0 单体欠压恢复 精度0.001 单位V 设置2.8
0003 单体欠压延时 精度1 单位s 设置3
0248 总压过压 精度0.1 单位V 设置58.4
023A 总压过压恢复 精度0.1 单位V 设置57.0
0003 总压过压延时 精度1 单位s 设置3
0190 总压欠压 精度0.1 单位V 设置40
01A4 总压欠压恢复 精度0.1 单位V 设置42
0003 总压欠压延时 精度1 单位s 设置3
0BB8 充电过流 精度0.1 单位A 设置300
0000 充电过流恢复 精度0.1 单位A 设置0
0003 充电过流延时 精度1 单位s 设置3
1388 放电过流 精度0.1 单位A 设置500
0000 放电过流恢复 精度0.1 单位A 设置0
0003 放电过流延时 精度1 单位s 设置3
FFCE 充电低温 精度0.1 单位℃ 设置-5
0000 充电低温恢复 精度0.1 单位℃ 设置0
0003 充电低温延时 精度1 单位s 设置3
FF38 放电低温 精度0.1 单位℃ 设置-20
FF6A 放电低温恢复 精度0.1 单位℃ 设置-15
0003 放电低温延时 精度1 单位s 设置3
0226 充电过温 精度0.1 单位℃ 设置55
01F4 充电过温恢复 精度0.1 单位℃ 设置50
0003 充电过温延时 精度1 单位s 设置3
0258 放电过温 精度0.1 单位℃ 设置60
01F4 放电过温恢复 精度0.1 单位℃ 设置50
0003 放电过温延时 精度1 单位s 设置3
0000
0000
A1B1
报警参数
01
10
1790
001E 30
3C
0E74 单体过压 精度0.001 单位V 设置3.7
0E42 单体过压恢复 精度0.001 单位V 设置3.65
0003 单体过压延时 精度1 单位s 设置3
0960 单体欠压 精度0.001 单位V 设置2.4
0992 单体欠压恢复 精度0.001 单位V 设置2.45
0003 单体欠压延时 精度1 单位s 设置3
024C 总压过压 精度0.1 单位V 设置58.8
0248 总压过压恢复 精度0.1 单位V 设置58.4
0003 总压过压延时 精度1 单位s 设置3
0186 总压欠压 精度0.1 单位V 设置30
0190 总压欠压恢复 精度0.1 单位V 设置40
0003 总压欠压延时 精度1 单位s 设置3
0BB8 充电过流 精度0.1 单位A 设置300
0FA0 充电过流恢复 精度0.1 单位A 设置400
0003 充电过流延时 精度1 单位s 设置3
1388 放电过流 精度0.1 单位A 设置500
0FA0 放电过流恢复 精度0.1 单位A 设置400
0003 放电过流延时 精度1 单位s 设置3
0000 充电低温 精度0.1 单位℃ 设置0
0014 充电低温恢复 精度0.1 单位℃ 设置2
0003 充电低温延时 精度1 单位s 设置3
FF4C 放电低温 精度0.1 单位℃ 设置-18 补码 等于 反码+1
FF56 放电低温恢复 精度0.1 单位℃ 设置-17 注意精度0.1 需要乘以10
0003 放电低温延时 精度1 单位s 设置3
021C 充电过温 精度0.1 单位℃ 设置54
0208 充电过温恢复 精度0.1 单位℃ 设置52
0003 充电过温延时 精度1 单位s 设置3
0244 放电过温 精度0.1 单位℃ 设置58
0226 放电过温恢复 精度0.1 单位℃ 设置55
0003 放电过温延时 精度1 单位s 设置3
D24F
01101790001E3C0E740E420003096009920003024C024800030186019000030BB80FA0000313880F
A00003000000140003FF4CFF560003021C02080003024402260
BMS参数
01
10
17B2
0012 18
24
012C 电池容量 精度1 单位Ah 设置300
0010 电池串数 精度1 单位串 设置16
0002 芯片个数 精度1 单位个 设置2
0008 芯片01 精度1 单位串 设置8
0008 芯片02 精度1 单位串 设置8
0000 芯片03 精度1 单位串 设置0
0000 芯片04 精度1 单位串 设置0
0000 芯片05 精度1 单位串 设置0
0DAC &quot;SOC 100% 电压&quot; 精度0.001 单位V 设置3.500
0004 &quot;SOC 100% 电流&quot; 精度0.1 单位A 设置0.41
0A8C &quot;SOC 0% 电压&quot; 精度0.001 单位V 设置2.700
0014 屏蔽 精度0.1 单位 设置2.0
01F4 霍尔 精度1 单位 设置500
0004 正偏移 精度0.1 单位 设置0.4
0098 负偏移 精度0.1 单位 设置15.2
000A 休眠时间 精度1 单位分钟 设置10
000B 休眠电流 精度0.1 单位A 设置1.1
13EC 过放下电 精度0.001 单位V 设置2.4
0834
平衡参数
01
10
17AE
0004 4
08
0032 启动压差 精度0.001 单位V 设置0.050
0014 停止压差 精度0.001 单位V 设置0.020
0DAC 启动电压 精度0.001 单位V 设置3.500
01C2 截止温度 精度0.1 单位℃ 设置45.0
88F7
---
功能选择
01
10
17C4
0001
02
0921
179D
全选
01
10
17C4
0001
02
0FFF (bit0-bit11) 功能选择位
9465
1，3选择
01
10
17C4
0001 1
02
0011
11D9
---
充电机参数
01
10
17C5
0002 2
04
0248 充电机电压 精度0.1 单位V 设置58.4
0578 充电机电流 精度0.1 单位A 设置140
56EC
---
充电电流转换点
01
10
17CA
0001 1
02
0DAC 充电电流转换点 精度1 单位mv 设置3500
D416
读协议
2017-06-23 14:15:53|166 test read
01
03
0190 地址
002A
C5C4
2017-06-23 14:15:55|177 test read
01
03
0000
003C
45DB
2017-06-23 14:15:56|683
test read
01
03
012C
0014
85F0
01
03
1770
005A 100
C19
</code></pre>

<h2 id="uart">uart通讯示例</h2>
<pre><code class="markdown">
发送给BMS：

LD_BMS_DATA_01 = &quot;01030000003C45DB&quot;
LD_BMS_DATA_02 = &quot;01030190002AC5C4&quot;
LD_BMS_DATA_03 = &quot;0103012C001485F0&quot;
LD_BMS_DATA_04 = &quot;01031770005AC19E&quot;
LD_BMS_DATA_05 = &quot;010317CA0014604F&quot;
LD_BMS_DATA_06 = &quot;0103138800438095&quot;

对应接收BMS回复的数据:(DATA_0x 对应 datax)

data1:0103780BC80BCE0BD10BD30BCB0BD30BCB0BCB000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040D3;

data2:01035400000000000000000000000000000002000000000BD30BC800030001000B0BCD00F100000000000000D103A000000000000000000000000000000000000000000000000500000000000000000000000000010064D877;

data3:0103280135012C01300009000000000000000000000000012C013500000000000000000000000000000000B0F7;

data4:0103B40E740D48000309C40AF0000301240110000300C800E000030BB8000A00031388000A0003FFCE00000003FF38FF6A0003025802260003025802260003000000000EA60E4200030B540BB8000301280124000300C000C400030BB80BB8000313880FA00003FFEC00000003FF4CFF560003024402080003024402260003003200140DAC01C201C200080001000800050005000500050E42001409C4001401F40001FFFF0078002809600BFF01240708000000000000637E;

data5:0103280DDE00000000000000000000000000000000000000010001000003FF03FF000300000000000000004F8F;

data6:0103860BCA0BCE0BD30BD10BCB0BD10BCD0BCD00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BD30BCA0003000100090BCE00F1000000F100F1000000000000000200000000012C013500000000000000000135012C0130000900000000000000000000FA53;

</code></pre>

<h2 id="_2">服务端接收示例</h2>
<h3 id="_3">启动设备</h3>
<pre><code class="markdown">rsdev:862991528408005;v:LD_Battery_Manager_Cloud_0.0.4;tip:47.93.33.171;tport:63101;key:WlhKN4JunVtzNXJxcqdIjd42Tboib30c;heart_t:5000;repo_t:300000;bms_t:10000;gps:10;bms:1;
</code></pre>

<h3 id="_4">上报信息</h3>
<pre><code class="markdown">dev:862991528408575;gps:true,117.3486016,32.8700616;data1:0103780ACE0A800ABD0AAA0A830A8C0AD70AA70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000563F;data2:01035400000000000000000000000000000000000000000AD50A810007000200540AA800DA00000000000000D103A000020002000000000000000000000000000000000000000500150002004C01FC003E000000000064BC9B;data3:01032801720170017100020000000000000000000000000172017000000000000000000000000000000000FC1F;data4:0103B40E420D48000309C40AF000030124011D000300C800D2000305DC000000030BB800000003FFCE00000003FF38FF6A0003022601F40003025801F40003000000000E740E4200030AF00B22000301260124000300C300C8000305DC03E800030BB807D00003000000140003FF4CFF560003021C02080003024402260003003200140DAC01C2009600080001000800050005000500050DAC00140A8C001401F4FFFE0002001E000A07D00BFF012404B000000000000084CE;data5:0103280DDE000000000000000000000000000000000000000100010000000A03FF000300000000000000000078;data6:0103860ACC0A7E0ABC0AA80A810A890AD50AA500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000AD50A7E0007000200570AA600DA000000DA00DA000000000000000000000000017201700000000000000000017201700171000200000000000000020002DD5
</code></pre>

<h3 id="_5">心跳</h3>
<pre><code class="markdown">ld862991528408005
</code></pre>
     </main>

     <aside id="page-toc" class="page-toc" role="complementary" aria-label="Table of Contents for this page">
       <button aria-label="Close" id="page-toc__closebtn" class="page-toc__closebtn">X</button>
       <h2 class="page-toc__heading">On this Page:</h2>
<ul>

    <li class="page-toc__item"><a href="#demo" class="page-toc__link" tabindex="0">通讯demo</a></li>
    
        <li class="page-toc__item"><a href="#_1" class="page-toc__link" tabindex="0">安科瑞通讯协议详细示例</a></li>
    
        <li class="page-toc__item"><a href="#uart" class="page-toc__link" tabindex="0">uart通讯示例</a></li>
    
        <li class="page-toc__item"><a href="#_2" class="page-toc__link" tabindex="0">服务端接收示例</a></li>
    

</ul>

     </aside>
   

   
     
      <a href="../perform/" class="maincontent__link maincontent__link--previous-page">Previous: 性能总结</a>
    
    
      <a href="../test/" class="maincontent__link maincontent__link--next-page">Next: 测试视频</a>
    
   

    
    <footer class="footer-main" role="contentinfo">
      
        <p>yqmcu. Built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://hfagerlund.github.io/mkdocs-docskimmer/">docSkimmer theme</a>.</p>
      
    </footer>
    
  </div><!-- END .wrapper -->
  <a class="skiptotop" href="#top">back to top</a>

  
    
  

  
    <script src="../../js/base.js"></script>
   
  

  <!--
  MkDocs version : 0.16.3
  Build Date UTC : 2017-09-29 02:55:48
  -->
  </body>
</html>